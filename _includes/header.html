{%- assign user = site.github.owner %}

{%- if page.path contains '_posts' %}
  {% assign page_title = page.title %}
  {% assign meta_description = page.content | strip_html | strip_newlines | xml_escape | truncate: 300 %}
{% else %}
  {% assign page_title = user.name %}
  {% assign meta_description = user.bio | strip_html | strip_newlines | xml_escape | truncate: 300 %}
{% endif %}

<head>
  <meta charset="utf-8">
  <title>{{ page_title }}</title>
  <meta name="description" content="{{ meta_description }}" />
  <meta property="og:title" content="{{ user.name }}" />
  <meta property="og:image" content="{% if page.image %}{{ page.image }}{% else %}{{ user.avatar_url }}{% endif %}" />
  <meta property="og:description" content="{{ meta_description }}" />
  <meta property="og:type" content="profile" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="https://unpkg.com/@primer/css@^20.2.4/dist/primer.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/octicons-css/octicons.min.css" rel="stylesheet" >
  <link href="{{ '/assets/css/main.css' | relative_url }}" rel="stylesheet" type="text/css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">


  {% if site.analytics.provider == 'google' %}
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.analytics.property }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', '{{ site.analytics.property }}');
  </script>
  {%- endif %}

<script>
    document.addEventListener('DOMContentLoaded', function () {
      var themeToggle = document.getElementById('theme-toggle');
      var themeIcon = document.getElementById('theme-icon');
      var htmlElement = document.getElementsByTagName('html')[0];

      function getNextMode() {
        var currentMode = htmlElement.getAttribute('data-color-mode');
        var nextMode;
        if (currentMode === 'auto') {
          nextMode = 'dark';
        } else if (currentMode === 'dark') {
          nextMode = 'light'
        } else {
          nextMode = 'auto'
        }
        return nextMode;
      }

      function updateTheme(nextMode) {
        htmlElement.setAttribute('data-color-mode', nextMode);
      }

      function updateThemeIcon(nextMode) {
        if (nextMode === 'dark') {
          nextIcon = 'moon';
        } else if (nextMode === 'light') {
          nextIcon = 'sun'
        } else {
          nextIcon = 'zap';
        }
        // Set the span to the themeIcon class
        themeIcon.classList = "octicon octicon-" + nextIcon + "-24";
      }

      themeToggle.addEventListener('click', function () {
        updateTheme(getNextMode());
        updateThemeIcon(getNextMode());
      });

      // Initialize the theme icon based on the initial state
      updateThemeIcon(getNextMode());
    });
  </script>

</head>
